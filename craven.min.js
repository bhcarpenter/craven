(function(){var e,f=[],h=f.slice,j=f.splice,k=f.push,l=f.shift,m=f.pop,p=f.unshift;function q(a,b,c,d){b=[b,c];k.apply(b,d);return j.apply(a,b)}function r(a,b){for(var c={},d=b.length;d--;)b[d]in a&&(c[b[d]]=a[b[d]]);return c}function s(a,b,c){if(a.map)return a.map(b,c);for(var d=a.length,g=Array(d);d--;)g[d]=b.call(c,a[d]);return g}function t(a){for(var b=h.call(arguments,1),c=0,d=b.length;c<d;c++){var g=b[c],n;for(n in g)a[n]=g[n]}return a}
function u(a,b){var c=a[b];return"function"===typeof c?c.call(a):c};var v={c:function(a,b,c){this.d||(this.d={},this.e={});this.d[a]||(this.d[a]=[],this.e[a]=[]);this.d[a].push(b);this.e[a].push(c||this)},b:function(a,b,c){if(this.d&&a in this.d){var d=this.d[a];a=this.e[a];for(var g=d.length;g--;)if(d[g]==b&&a[g]==c){d.splice(g,1);a.splice(g,1);break}}},a:function(a){if(this.d&&a in this.d){var b=this.d[a].slice(0),c=this.e[a].slice(0),d=b.length,g=h.call(arguments,1);for(g.push(this);d--;)b[d].apply(c[d],g)}}};function w(a){a&&this.h(a)}w.prototype={};w.prototype.c=v.c;w.prototype.b=v.b;w.prototype.a=v.a;w.prototype.f={};w.prototype.attributes=[];e=w.prototype;e.h=function(a){this.f=a=r(a,this.attributes);t(this,a)};e.n=function(a){t(this,r(a,this.attributes))};e.toJSON=function(){return r(this,this.attributes)};e.q=function(){};e.m=function(){if(!1===this.validate())return!1;var a=this.toJSON(),b=this.f;this.f=a;var c,d={},g=!1;for(c in a)a[c]!==b[c]&&(g=d[c]=a[c]);g&&this.a("change",d,b);return!0};
e.p=function(){this.a("destroy")};function x(a,b){this.model=a;b&&k.apply(this,y(this,b))}x.prototype=[];e=x.prototype;e.c=v.c;e.b=v.b;e.a=v.a;e.pop=function(){return z(this,m,this.length-1)};e.push=function(){return A(this,arguments,k,this.length)};e.shift=function(){return z(this,l,0)};e.unshift=function(){return A(this,arguments,p,0)};e.splice=function(){var a=arguments,b=y(this,h.call(a,2)),a=q(this,a[0],a[1],b);B(this,a);a.length&&this.a("remove",a);b.length&&this.a("add",b);return a};
function A(a,b,c,d){b=y(a,b);c=c.apply(a,b);a.a("add",b,d);return c}function z(a,b,c){b=b.call(a);B(a,b);b&&a.a("remove",[b],c);return b}e.l=function(a){a=q(this,0,this.length,y(this,a));B(this,a);this.a("reset",a)};e.remove=function(a){this.k(this.indexOf(a))};e.k=function(a){if(-1!=a){var b=j.call(this,a,1);B(this,b);this.a("remove",b,a)}};e.toJSON=function(){return s(this,function(a){return a.toJSON()})};
function y(a,b){var c=a.model;return s(b,function(a){a instanceof c||(a=new c(a));a.c("destroy",this.remove,this);return a},a)}function B(a,b){for(var c=b.length;c--;)b[c].b("destroy",a.remove,a)};var C={view:null,tagName:"div",id:"",className:""};function D(a){t(this,C,a);this.view||(this.view=t(document.createElement(u(this,"tagName")),u(this,"attributes"),{id:u(this,"id"),className:u(this,"className")}))}D.prototype.o=function(){};var E=D.prototype.remove=function(){var a=this.view,b=a.parentNode;b&&b.removeChild(a)};function F(a,b){D.call(this,b);var c=this.model=a;c.c("change",G,this);c.c("destroy",H,this)}F.prototype=new D;F.prototype.remove=function(){var a=this.model;a.b("change",G,this);a.b("destroy",H,this);E.call(this)};function G(){this.render()}function H(){this.remove()};function I(a,b){D.call(this,b);this.collection=a;this.i=[];this.g(a,0);var c=this.collection;c.c("add",this.g,this);c.c("remove",this.j,this)}I.prototype=new D;I.prototype.remove=function(){var a=this.collection;a.b("add",this.g,this);a.b("remove",this.j,this);E.call(this)};I.prototype.g=function(a,b){for(var c=document.createDocumentFragment(),d=a.length,g=Array(d),n;d--;)n=g[d]=new F(a[d]),c.appendChild(n.view);q(this.i,b,0,g);d=this.view;d.insertBefore(c,d.children[b])};
I.prototype.j=function(a,b){for(var c=a.length,d=this.i.splice(b,c);c--;)d[c].remove()};var J={};window.Craven=J;J.Events=v;v.on=v.c;v.off=v.b;v.trigger=v.a;J.Model=w;w.subtype=function(a,b){function c(){d.apply(this,arguments);b&&b.apply(this,arguments)}var d=J.Model;c.prototype=new d;c.prototype.attributes=a;return c};w.prototype.reset=w.prototype.h;w.prototype.update=w.prototype.n;w.prototype.toJSON=w.prototype.toJSON;w.prototype.validate=w.prototype.q;w.prototype.save=w.prototype.m;w.prototype.destroy=w.prototype.p;w.prototype.on=w.prototype.c;w.prototype.off=w.prototype.b;
w.prototype.trigger=w.prototype.a;J.Collection=x;x.prototype.reset=x.prototype.l;x.prototype.remove=x.prototype.remove;x.prototype.removeAt=x.prototype.k;x.prototype.on=x.prototype.c;x.prototype.off=x.prototype.b;x.prototype.trigger=x.prototype.a;J.Controller=D;D.prototype.render=D.prototype.o;D.prototype.remove=D.prototype.remove;J.ModelController=F;J.CollectionController=I;}());
